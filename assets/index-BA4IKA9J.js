import{a2 as ke,a4 as be,ap as q,b as We,a6 as _e,bB as Ye,d as G,D as xe,a7 as Xe,c as v,cl as Je,aJ as Pe,aD as _,i as M,ae as Y,ay as ee,a3 as we,az as V,_ as Qe,a as Ne,cm as Ze,bQ as qe,u as Ce,ac as Ge,ad as et,aa as tt,aE as nt,bs as at,cn as ot,co as st,a5 as lt,aV as it,H as rt,as as ut,e as S,o as m,f as h,L as te,j as N,n as g,g as t,r as j,A as I,m as L,F as U,E as R,at as Se,k as dt,bw as ct,am as pt,cj as ft,t as W,h as Ee,ar as Ie,an as ze,w as mt}from"./index-efaOxweq.js";import{U as ne}from"./event-BB_Ol6Sd.js";const vt=()=>ke&&/firefox/i.test(window.navigator.userAgent);let C;const ht=`
  height:0 !important;
  visibility:hidden !important;
  ${vt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,gt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function yt(a){const u=window.getComputedStyle(a),s=u.getPropertyValue("box-sizing"),n=Number.parseFloat(u.getPropertyValue("padding-bottom"))+Number.parseFloat(u.getPropertyValue("padding-top")),i=Number.parseFloat(u.getPropertyValue("border-bottom-width"))+Number.parseFloat(u.getPropertyValue("border-top-width"));return{contextStyle:gt.map(r=>`${r}:${u.getPropertyValue(r)}`).join(";"),paddingSize:n,borderSize:i,boxSizing:s}}function Fe(a,u=1,s){var n;C||(C=document.createElement("textarea"),document.body.appendChild(C));const{paddingSize:i,borderSize:c,boxSizing:r,contextStyle:l}=yt(a);C.setAttribute("style",`${l};${ht}`),C.value=a.value||a.placeholder||"";let d=C.scrollHeight;const b={};r==="border-box"?d=d+c:r==="content-box"&&(d=d-i),C.value="";const f=C.scrollHeight-i;if(be(u)){let w=f*u;r==="border-box"&&(w=w+i+c),d=Math.max(w,d),b.minHeight=`${w}px`}if(be(s)){let w=f*s;r==="border-box"&&(w=w+i+c),d=Math.min(w,d)}return b.height=`${d}px`,(n=C.parentNode)==null||n.removeChild(C),C=void 0,b}const bt=We({id:{type:String,default:void 0},size:Xe,disabled:Boolean,modelValue:{type:G([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:G([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:xe},prefixIcon:{type:xe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:G([Object,Array,String]),default:()=>Ye({})},autofocus:Boolean,rows:{type:Number,default:2},..._e(["ariaLabel"])}),xt={[ne]:a=>q(a),input:a=>q(a),change:a=>q(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},wt=["class","style"],Ct=/^on[A-Z]/,St=(a={})=>{const{excludeListeners:u=!1,excludeKeys:s}=a,n=v(()=>((s==null?void 0:s.value)||[]).concat(wt)),i=Pe();return i?v(()=>{var c;return Je(Object.entries((c=i.proxy)==null?void 0:c.$attrs).filter(([r])=>!n.value.includes(r)&&!(u&&Ct.test(r))))}):v(()=>({}))};function Et(a,{beforeFocus:u,afterFocus:s,beforeBlur:n,afterBlur:i}={}){const c=Pe(),{emit:r}=c,l=_(),d=M(!1),b=y=>{we(u)&&u(y)||d.value||(d.value=!0,r("focus",y),s==null||s())},f=y=>{var x;we(n)&&n(y)||y.relatedTarget&&((x=l.value)!=null&&x.contains(y.relatedTarget))||(d.value=!1,r("blur",y),i==null||i())},w=()=>{var y,x;(y=l.value)!=null&&y.contains(document.activeElement)&&l.value!==document.activeElement||(x=a.value)==null||x.focus()};return Y(l,y=>{y&&y.setAttribute("tabindex","-1")}),ee(l,"focus",b,!0),ee(l,"blur",f,!0),ee(l,"click",w,!0),{isFocused:d,wrapperRef:l,handleFocus:b,handleBlur:f}}const It=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function zt({afterComposition:a,emit:u}){const s=M(!1),n=l=>{u==null||u("compositionstart",l),s.value=!0},i=l=>{var d;u==null||u("compositionupdate",l);const b=(d=l.target)==null?void 0:d.value,f=b[b.length-1]||"";s.value=!It(f)},c=l=>{u==null||u("compositionend",l),s.value&&(s.value=!1,V(()=>a(l)))};return{isComposing:s,handleComposition:l=>{l.type==="compositionend"?c(l):i(l)},handleCompositionStart:n,handleCompositionUpdate:i,handleCompositionEnd:c}}function Ft(a){let u;function s(){if(a.value==null)return;const{selectionStart:i,selectionEnd:c,value:r}=a.value;if(i==null||c==null)return;const l=r.slice(0,Math.max(0,i)),d=r.slice(Math.max(0,c));u={selectionStart:i,selectionEnd:c,value:r,beforeTxt:l,afterTxt:d}}function n(){if(a.value==null||u==null)return;const{value:i}=a.value,{beforeTxt:c,afterTxt:r,selectionStart:l}=u;if(c==null||r==null||l==null)return;let d=i.length;if(i.endsWith(r))d=i.length-r.length;else if(i.startsWith(c))d=c.length;else{const b=c[l-1],f=i.indexOf(b,l-1);f!==-1&&(d=f+1)}a.value.setSelectionRange(d,d)}return[s,n]}const kt=Ne({name:"ElInput",inheritAttrs:!1}),Pt=Ne({...kt,props:bt,emits:xt,setup(a,{expose:u,emit:s}){const n=a,i=Ze(),c=St(),r=qe(),l=v(()=>[n.type==="textarea"?ae.b():o.b(),o.m(y.value),o.is("disabled",x.value),o.is("exceed",Re.value),{[o.b("group")]:r.prepend||r.append,[o.m("prefix")]:r.prefix||n.prefixIcon,[o.m("suffix")]:r.suffix||n.suffixIcon||n.clearable||n.showPassword,[o.bm("suffix","password-clear")]:K.value&&J.value,[o.b("hidden")]:n.type==="hidden"},i.class]),d=v(()=>[o.e("wrapper"),o.is("focus",O.value)]),{form:b,formItem:f}=tt(),{inputId:w}=nt(n,{formItemContext:f}),y=Ge(),x=et(),o=Ce("input"),ae=Ce("textarea"),A=_(),E=_(),X=M(!1),H=M(!1),oe=M(),D=_(n.inputStyle),F=v(()=>A.value||E.value),{wrapperRef:Ve,isFocused:O,handleFocus:Te,handleBlur:$e}=Et(F,{beforeFocus(){return x.value},afterBlur(){var e;n.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"blur").catch(p=>ze()))}}),se=v(()=>{var e;return(e=b==null?void 0:b.statusIcon)!=null?e:!1}),T=v(()=>(f==null?void 0:f.validateState)||""),le=v(()=>T.value&&at[T.value]),Be=v(()=>H.value?ot:st),Le=v(()=>[i.style]),ie=v(()=>[n.inputStyle,D.value,{resize:n.resize}]),z=v(()=>lt(n.modelValue)?"":String(n.modelValue)),K=v(()=>n.clearable&&!x.value&&!n.readonly&&!!z.value&&(O.value||X.value)),J=v(()=>n.showPassword&&!x.value&&!!z.value&&(!!z.value||O.value)),k=v(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!x.value&&!n.readonly&&!n.showPassword),Q=v(()=>z.value.length),Re=v(()=>!!k.value&&Q.value>Number(n.maxlength)),Me=v(()=>!!r.suffix||!!n.suffixIcon||K.value||n.showPassword||k.value||!!T.value&&se.value),[re,ue]=Ft(A);it(E,e=>{if(Ae(),!k.value||n.resize!=="both")return;const p=e[0],{width:P}=p.contentRect;oe.value={right:`calc(100% - ${P+15+6}px)`}});const $=()=>{const{type:e,autosize:p}=n;if(!(!ke||e!=="textarea"||!E.value))if(p){const P=Ie(p)?p.minRows:void 0,ge=Ie(p)?p.maxRows:void 0,ye=Fe(E.value,P,ge);D.value={overflowY:"hidden",...ye},V(()=>{E.value.offsetHeight,D.value=ye})}else D.value={minHeight:Fe(E.value).minHeight}},Ae=(e=>{let p=!1;return()=>{var P;if(p||!n.autosize)return;((P=E.value)==null?void 0:P.offsetParent)===null||(e(),p=!0)}})($),B=()=>{const e=F.value,p=n.formatter?n.formatter(z.value):z.value;!e||e.value===p||(e.value=p)},Z=async e=>{re();let{value:p}=e.target;if(n.formatter&&(p=n.parser?n.parser(p):p),!ce.value){if(p===z.value){B();return}s(ne,p),s("input",p),await V(),B(),ue()}},de=e=>{s("change",e.target.value)},{isComposing:ce,handleCompositionStart:pe,handleCompositionUpdate:fe,handleCompositionEnd:me}=zt({emit:s,afterComposition:Z}),He=()=>{re(),H.value=!H.value,setTimeout(ue)},De=()=>{var e;return(e=F.value)==null?void 0:e.focus()},Oe=()=>{var e;return(e=F.value)==null?void 0:e.blur()},Ke=e=>{X.value=!1,s("mouseleave",e)},je=e=>{X.value=!0,s("mouseenter",e)},ve=e=>{s("keydown",e)},Ue=()=>{var e;(e=F.value)==null||e.select()},he=()=>{s(ne,""),s("change",""),s("clear"),s("input","")};return Y(()=>n.modelValue,()=>{var e;V(()=>$()),n.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"change").catch(p=>ze()))}),Y(z,()=>B()),Y(()=>n.type,async()=>{await V(),B(),$()}),rt(()=>{!n.formatter&&n.parser,B(),V($)}),u({input:A,textarea:E,ref:F,textareaStyle:ie,autosize:ut(n,"autosize"),isComposing:ce,focus:De,blur:Oe,select:Ue,clear:he,resizeTextarea:$}),(e,p)=>(m(),S("div",{class:g([t(l),{[t(o).bm("group","append")]:e.$slots.append,[t(o).bm("group","prepend")]:e.$slots.prepend}]),style:Ee(t(Le)),onMouseenter:je,onMouseleave:Ke},[h(" input "),e.type!=="textarea"?(m(),S(te,{key:0},[h(" prepend slot "),e.$slots.prepend?(m(),S("div",{key:0,class:g(t(o).be("group","prepend"))},[j(e.$slots,"prepend")],2)):h("v-if",!0),N("div",{ref_key:"wrapperRef",ref:Ve,class:g(t(d))},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),S("span",{key:0,class:g(t(o).e("prefix"))},[N("span",{class:g(t(o).e("prefix-inner"))},[j(e.$slots,"prefix"),e.prefixIcon?(m(),I(t(R),{key:0,class:g(t(o).e("icon"))},{default:L(()=>[(m(),I(U(e.prefixIcon)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),N("input",Se({id:t(w),ref_key:"input",ref:A,class:t(o).e("inner")},t(c),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?H.value?"text":"password":e.type,disabled:t(x),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(me),onInput:Z,onChange:de,onKeydown:ve}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),h(" suffix slot "),t(Me)?(m(),S("span",{key:1,class:g(t(o).e("suffix"))},[N("span",{class:g(t(o).e("suffix-inner"))},[!t(K)||!t(J)||!t(k)?(m(),S(te,{key:0},[j(e.$slots,"suffix"),e.suffixIcon?(m(),I(t(R),{key:0,class:g(t(o).e("icon"))},{default:L(()=>[(m(),I(U(e.suffixIcon)))]),_:1},8,["class"])):h("v-if",!0)],64)):h("v-if",!0),t(K)?(m(),I(t(R),{key:1,class:g([t(o).e("icon"),t(o).e("clear")]),onMousedown:pt(t(ft),["prevent"]),onClick:he},{default:L(()=>[dt(t(ct))]),_:1},8,["class","onMousedown"])):h("v-if",!0),t(J)?(m(),I(t(R),{key:2,class:g([t(o).e("icon"),t(o).e("password")]),onClick:He},{default:L(()=>[(m(),I(U(t(Be))))]),_:1},8,["class"])):h("v-if",!0),t(k)?(m(),S("span",{key:3,class:g(t(o).e("count"))},[N("span",{class:g(t(o).e("count-inner"))},W(t(Q))+" / "+W(e.maxlength),3)],2)):h("v-if",!0),t(T)&&t(le)&&t(se)?(m(),I(t(R),{key:4,class:g([t(o).e("icon"),t(o).e("validateIcon"),t(o).is("loading",t(T)==="validating")])},{default:L(()=>[(m(),I(U(t(le))))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(m(),S("div",{key:1,class:g(t(o).be("group","append"))},[j(e.$slots,"append")],2)):h("v-if",!0)],64)):(m(),S(te,{key:1},[h(" textarea "),N("textarea",Se({id:t(w),ref_key:"textarea",ref:E,class:[t(ae).e("inner"),t(o).is("focus",t(O))]},t(c),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(x),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(me),onInput:Z,onFocus:t(Te),onBlur:t($e),onChange:de,onKeydown:ve}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(k)?(m(),S("span",{key:0,style:Ee(oe.value),class:g(t(o).e("count"))},W(t(Q))+" / "+W(e.maxlength),7)):h("v-if",!0)],64))],38))}});var Nt=Qe(Pt,[["__file","input.vue"]]);const Bt=mt(Nt);export{Bt as E,Et as a,vt as i,zt as u};
