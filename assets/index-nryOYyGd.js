import{a2 as S,cj as T,a as X,b as U,u as x,k as G,B as K,r as h,d as Y,H as z,aU as V,aW as $,bJ as N,aK as j,ao as J,c as Q,aQ as A,ae as q,ck as Z,aT as g,b2 as P,aR as F}from"./index-efaOxweq.js";let m;const ee=e=>{var t;if(!S)return 0;if(m!==void 0)return m;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const n=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const i=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),m=n-i,m};function le(e,t){if(!S)return;if(!t){e.scrollTop=0;return}const o=[];let n=t.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)o.push(n),n=n.offsetParent;const s=t.offsetTop+o.reduce((d,r)=>d+r.offsetTop,0),i=s+t.offsetHeight,u=e.scrollTop,l=u+e.clientHeight;s<u?e.scrollTop=s:i>l&&(e.scrollTop=i-e.clientHeight)}var v=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(v||{});const oe=e=>{if(!e)return{onClick:T,onMousedown:T,onMouseup:T};let t=!1,o=!1;return{onClick:u=>{t&&o&&e(u),t=o=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{o=u.target===u.currentTarget}}},te=U({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ue=X({name:"ElOverlay",props:te,emits:ne,setup(e,{slots:t,emit:o}){const n=x(se),s=d=>{o("click",d)},{onClick:i,onMousedown:u,onMouseup:l}=oe(e.customMaskEvent?void 0:s);return()=>e.mask?G("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:u,onMouseup:l},[h(t,"default")],v.STYLE|v.CLASS|v.PROPS,["onClick","onMouseup","onMousedown"]):K("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(t,"default")])}});const de=ue,re=(e,t,o,n)=>{let s={offsetX:0,offsetY:0};const i=r=>{const p=r.clientX,O=r.clientY,{offsetX:E,offsetY:y}=s,c=e.value.getBoundingClientRect(),w=c.left,b=c.top,H=c.width,_=c.height,k=document.documentElement.clientWidth,D=document.documentElement.clientHeight,B=-w+E,I=-b+y,W=k-w-H+E,R=D-b-_+y,M=C=>{let a=E+C.clientX-p,f=y+C.clientY-O;n!=null&&n.value||(a=Math.min(Math.max(a,B),W),f=Math.min(Math.max(f,I),R)),s={offsetX:a,offsetY:f},e.value&&(e.value.style.transform=`translate(${N(a)}, ${N(f)})`)},L=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",L)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},l=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)},d=()=>{s={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return z(()=>{V(()=>{o.value?u():l()})}),$(()=>{l()}),{resetPosition:d}},ce=(e,t={})=>{j(e)||J("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||x("popup"),n=Q(()=>o.bm("parent","hidden"));if(!S||A(document.body,n.value))return;let s=0,i=!1,u="0";const l=()=>{setTimeout(()=>{typeof document>"u"||i&&document&&(document.body.style.width=u,F(document.body,n.value))},200)};q(e,d=>{if(!d){l();return}i=!A(document.body,n.value),i&&(u=document.body.style.width,g(document.body,n.value)),s=ee(o.namespace.value);const r=document.documentElement.clientHeight<document.body.scrollHeight,p=P(document.body,"overflowY");s>0&&(r||p==="scroll")&&i&&(document.body.style.width=`calc(100% - ${s}px)`)}),Z(()=>l())};export{de as E,ce as a,oe as b,le as s,re as u};
